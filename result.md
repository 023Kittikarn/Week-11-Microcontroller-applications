# ใบงานที่ 11: การแปลงสัญญาณแอนะล็อกเป็นดิจิทัล (ADC) ใน ESP32

## การทดลองที่ 1 – การอ่านค่า Potentiometer

1. **เมื่อหมุน Potentiometer ไปทางซ้ายสุด ค่า ADC ที่ได้คือเท่าไร?**  
   - ค่า ADC ใกล้ **0** เนื่องจากแรงดันที่ขา ADC ใกล้ GND

2. **เมื่อหมุน Potentiometer ไปทางขวาสุด ค่า ADC ที่ได้คือเท่าไร?**  
   - ค่า ADC ใกล้ **4095** (สำหรับ 12-bit ADC) เพราะแรงดันใกล้ 3.3V

3. **หากต้องการให้ค่า ADC อยู่ประมาณ 2048 ต้องหมุน Potentiometer ไปที่ตำแหน่งใด?**  
   - หมุนไป **ตำแหน่งกลาง** ของ potentiometer ประมาณ 50%

4. **ความผิดพลาดของการวัด (Error) ในการอ่านค่า ADC มีสาเหตุมาจากอะไรบ้าง?**  
   - Noise จากวงจรหรือแหล่งจ่ายไฟ  
   - ความไม่เป็นเชิงเส้นของ ADC  
   - คุณภาพ potentiometer  
   - การสุ่มตัวอย่างไม่เพียงพอ (sampling)  

## การทดลองที่ 2 – การอ่านค่าเซนเซอร์แสง (LDR)

1. **เมื่อใช้ไฟส่องใกล้ ๆ LDR ค่า ADC ที่ได้มีแนวโน้มเพิ่มขึ้นหรือลดลง? เพราะเหตุใด?**  
   - ค่า **เพิ่มขึ้น** เพราะแรงดันที่ ADC เพิ่มขึ้นเมื่อความต้านทาน LDR ลดลงตามความเข้มแสง

2. **เมื่อปิดบังแสงหรือปิดไฟ ค่า ADC ที่อ่านได้มีค่าประมาณเท่าไร?**  
   - ค่า ADC ใกล้ **0–500** (ขึ้นอยู่กับความมืดและตัวต้านทานที่ต่อร่วมกับ LDR)

3. **ปัจจัยใดบ้างที่ทำให้ค่าแสงที่วัดได้จาก LDR ไม่คงที่?**  
   - Noise จากวงจรหรือ ADC  
   - การเคลื่อนไหวของแสงหรือวัตถุ  
   - แสงสว่างจากแหล่งอื่น (Ambient light)  

4. **หากต้องการแบ่งระดับแสงเป็น 3 ระดับ (มืด / ปานกลาง / สว่าง) นักศึกษาจะกำหนดช่วงค่า ADC อย่างไร?**  
   - ตัวอย่างช่วง:  
     - มืด: 0–1000  
     - ปานกลาง: 1001–2500  
     - สว่าง: 2501–4095  


## การทดลองที่ 3 – การปรับปรุงความแม่นยำของ ADC

1. **เทคนิค Oversampling ช่วยให้ผลลัพธ์ดีขึ้นอย่างไร?**  
   - ลด **noise** โดยการอ่านหลายครั้งแล้วหาค่าเฉลี่ย  
   - ทำให้ค่า ADC มีความ **นิ่งและแม่นยำ** มากขึ้น

2. **Moving Average Filter มีหลักการทำงานอย่างไร?**  
   - เก็บค่าล่าสุดจำนวน N ค่า  
   - คำนวณค่าเฉลี่ยของ N ค่านั้น  
   - ลดผลกระทบจาก **การสั่นของสัญญาณชั่วคราว**

3. **ระหว่างค่า Raw, Oversampled และ Filtered แบบใดนิ่งที่สุด? เพราะเหตุใด?**  
   - **Filtered** เพราะผ่าน Oversampling และ Moving Average ทำให้ noise ถูกลดลงและค่าเสถียรที่สุด

4. **หากต้องการให้ค่าที่อ่านนิ่งกว่านี้ นักศึกษามีแนวคิดเพิ่มเติมอะไรบ้าง?**  
   - ใช้ **hardware filter** เช่น capacitor หรือตัวต้านทานเพิ่มเติม  
   - ใช้ **shielded wire** เพื่อลดสัญญาณรบกวน  
   - กำหนด **sampling rate** แบบคงที่  
   - ใช้ **digital filter** เพิ่มเติม เช่น Kalman filter  
